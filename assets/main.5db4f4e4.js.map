{"version":3,"file":"main.5db4f4e4.js","sources":["../../src/frontend/components/molecules/search/search.molecule.ts","../../src/frontend/main.ts"],"sourcesContent":["const getNumOfProjects = (tables: NodeListOf<HTMLElement>) => {\n\n    for(const table of tables){\n        const rows = table.querySelectorAll(' tbody [data-project]:not(.hidden)');\n        table.setAttribute('data-rows', `${rows.length}`);\n        const foundDiv = table.querySelector('[data-found] span');\n        if(foundDiv){\n            foundDiv.innerHTML = rows.length.toString();\n        }\n        if(rows.length === 0){\n            table.classList.add('hidden');\n        } else {\n            table.classList.remove('hidden');\n        }\n        \n    }\n}\n\nexport const createSearch = (target: string, uid: string, source: string) => {\n    const searchArea = document.querySelector(`[${target}=\"${uid}\"]`);\n    const tables = document.querySelectorAll('[data-projects]') as NodeListOf<HTMLElement>;\n    getNumOfProjects(tables);\n\n    const filterIcons = document.querySelectorAll('[data-project-filter]');\n    for(const filterIcon of filterIcons){\n        filterIcon.classList.add('active');\n        const id= filterIcon.getAttribute('data-project-filter');\n        const section = document.querySelector(`[data-projects=\"${id}\"]`);\n        section?.classList.add('active');\n\n        filterIcon.addEventListener('click', (e) => {\n            const target = e.target as HTMLElement;\n            const filter = target.getAttribute('data-project-filter');\n            const isActive = target.classList.contains('active');\n            const section = document.querySelector(`[data-projects=\"${filter}\"]`);\n            if(isActive){\n                section?.classList.remove('active');\n                target.classList.remove('active');\n                section?.classList.add('hidden');\n            } else {\n                section?.classList.add('active');\n                target.classList.add('active');\n                const activeItems = section?.getAttribute('data-rows');\n                if(activeItems !== '0'){\n                    section?.classList.remove('hidden');\n                    \n                }\n            }\n            // section?.classList.toggle('hidden');\n            // section?.classList.toggle('active');\n            // target.classList.toggle('active');\n        })\n    }\n\n\n    if(searchArea){\n        const input: HTMLInputElement | null = searchArea?.querySelector('input')\n        input?.addEventListener('keyup', (e) => {\n            \n            const target = e.target as HTMLInputElement;\n            const skills = document.querySelectorAll(source);\n            if(target.value === '') {\n                // reset search\n                for(const skill of skills) {\n                    skill.classList.remove('hidden');\n                    const valueItem = skill.querySelector('.skill-value');\n                    const placeholder = skill.querySelector('.skill-search');\n                    valueItem?.classList.remove('hidden');\n                    placeholder?.classList.add('hidden')\n                }\n            } else {\n                let i = 0;\n                const sections = document.querySelectorAll('[data-projects]');\n                for(const section of sections){\n                    // section.classList.add('hidden');\n                    const skills = section.querySelectorAll(source);\n                    for(const skill of skills) {\n                        const valueItem = skill.querySelector('.skill-value') as HTMLElement;\n                        const placeholder = skill.querySelector('.skill-search') as HTMLElement;\n                        const skillValue: string = valueItem?.innerText;\n                        if(skill.textContent?.toLowerCase().includes(target.value.toLowerCase())) {\n                            skill.classList.remove('hidden');\n                            valueItem?.classList.add('hidden')\n                            skill.querySelector('.skill-search')?.classList.remove('hidden')\n                            if(placeholder){\n                                const html = getHighlightedText(skillValue, target.value)\n                                placeholder.innerHTML = `${html}`\n                            }\n                            i += 1;\n                        } else {\n                            valueItem?.classList.remove('hidden')\n                            placeholder?.classList.add('hidden');\n                            skill.classList.add('hidden');\n                            // placeholder.innerHTML = '';\n                        }\n                    }\n                }\n\n                \n                const noResultItem: HTMLElement | null = searchArea?.querySelector('.search__no-result');\n                if(noResultItem){\n                    const searchItem: HTMLElement | null = noResultItem.querySelector('.search__value');\n                    if(i === 0){\n                        if(searchItem !== null){\n                            searchItem.innerText = `${target.value}`;\n                        }\n                        noResultItem?.classList.remove('search__info--hidden');\n                    } else {\n                        noResultItem?.classList.add('search__info--hidden')\n                    }\n                }\n                \n                \n            }\n            getNumOfProjects(tables);\n        });\n    }\n}\n\nexport const getHighlightedText = (text: string, searchTerm: string) => {\n    if(searchTerm === '') return text;\n    // Split the text by the highlight term\n    const parts = text.split(new RegExp(`(${searchTerm})`, 'gi'));\n    return parts.map((part, i) => \n        part.toLowerCase() === searchTerm.toLowerCase() ? `<span class=\"search-match\">${part}</span>` : part\n    ).join('');\n}\n","// import 'vite/dynamic-import-polyfill'; // for prod mode\nimport './_framework/css/index.css';\nimport { createSearch } from './components/molecules/search/search.molecule';\n\n\ncreateSearch('data-search', 'projects', '[data-project]');"],"names":["getNumOfProjects","tables","table","rows","foundDiv","createSearch","target","uid","source","searchArea","filterIcons","filterIcon","id","section","e","filter","isActive","input","skills","skill","valueItem","placeholder","i","sections","skillValue","_a","_b","html","getHighlightedText","noResultItem","searchItem","text","searchTerm","part"],"mappings":"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"}